{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport { Subscription } from 'rxjs';\nimport Swal from 'sweetalert2';\nimport * as XLSX from 'xlsx';\nimport * as Papa from 'papaparse';\nimport * as pdfMake from 'pdfmake/build/pdfmake';\nimport * as pdfFonts from 'pdfmake/build/vfs_fonts';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../Services/api.service\";\nimport * as i3 from \"../Services/imageupload.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/table\";\nimport * as i8 from \"@angular/material/paginator\";\nimport * as i9 from \"@angular/material/card\";\nconst _c0 = [\"paginator\"];\nfunction RevFinalizeComponent_div_0_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelement(1, \"div\", 21);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RevFinalizeComponent_div_0_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 22);\n    i0.ɵɵtext(1, \" Shipment Number \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c1 = function (a0, a1) {\n  return {\n    \"odd-row\": a0,\n    \"even-row\": a1\n  };\n};\nfunction RevFinalizeComponent_div_0_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r14 = ctx.$implicit;\n    const i_r15 = ctx.index;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c1, i_r15 % 2 === 1, i_r15 % 2 === 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r14.shpNmbr, \" \");\n  }\n}\nfunction RevFinalizeComponent_div_0_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 22);\n    i0.ɵɵtext(1, \" Client Name \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RevFinalizeComponent_div_0_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r16 = ctx.$implicit;\n    const i_r17 = ctx.index;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c1, i_r17 % 2 === 1, i_r17 % 2 === 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r16.name, \" \");\n  }\n}\nfunction RevFinalizeComponent_div_0_th_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 22);\n    i0.ɵɵtext(1, \"Date In\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RevFinalizeComponent_div_0_td_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r18 = ctx.$implicit;\n    const i_r19 = ctx.index;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c1, i_r19 % 2 === 1, i_r19 % 2 === 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 2, element_r18.insrDate, \"yyyy-MM-dd\"), \" \");\n  }\n}\nfunction RevFinalizeComponent_div_0_th_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 22);\n    i0.ɵɵtext(1, \"WareHouse File\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RevFinalizeComponent_div_0_td_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 24)(1, \"div\", 25)(2, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function RevFinalizeComponent_div_0_td_20_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const element_r20 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.getDetailByIdForPdf(element_r20.shpNmbr));\n    });\n    i0.ɵɵtext(3, \"Export to Pdf\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function RevFinalizeComponent_div_0_td_20_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const element_r20 = restoredCtx.$implicit;\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r24.getDetailByIdForExcel(element_r20.shpNmbr));\n    });\n    i0.ɵɵtext(5, \"Export to Excel\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction RevFinalizeComponent_div_0_th_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 22);\n    i0.ɵɵtext(1, \"CW File\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RevFinalizeComponent_div_0_td_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 24)(1, \"div\", 25);\n    i0.ɵɵelementContainerStart(2);\n    i0.ɵɵelementStart(3, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function RevFinalizeComponent_div_0_td_23_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const element_r25 = restoredCtx.$implicit;\n      const ctx_r27 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r27.getDetailByIdForCsv(element_r25.shpNmbr));\n    });\n    i0.ɵɵtext(4, \"Export to CSV\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RevFinalizeComponent_div_0_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 28);\n  }\n}\nfunction RevFinalizeComponent_div_0_tr_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 29);\n  }\n}\nconst _c2 = function () {\n  return [5, 10, 15, 20, 25];\n};\nfunction RevFinalizeComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"mat-card\", 2)(2, \"mat-card-content\", 3)(3, \"div\", 4);\n    i0.ɵɵelement(4, \"img\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 6);\n    i0.ɵɵtext(6, \" Review Finalized \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(7, RevFinalizeComponent_div_0_div_7_Template, 2, 0, \"div\", 7);\n    i0.ɵɵelementStart(8, \"table\", 8);\n    i0.ɵɵelementContainerStart(9, 9);\n    i0.ɵɵtemplate(10, RevFinalizeComponent_div_0_th_10_Template, 2, 0, \"th\", 10);\n    i0.ɵɵtemplate(11, RevFinalizeComponent_div_0_td_11_Template, 2, 5, \"td\", 11);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(12, 12);\n    i0.ɵɵtemplate(13, RevFinalizeComponent_div_0_th_13_Template, 2, 0, \"th\", 10);\n    i0.ɵɵtemplate(14, RevFinalizeComponent_div_0_td_14_Template, 2, 5, \"td\", 11);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(15, 13);\n    i0.ɵɵtemplate(16, RevFinalizeComponent_div_0_th_16_Template, 2, 0, \"th\", 10);\n    i0.ɵɵtemplate(17, RevFinalizeComponent_div_0_td_17_Template, 3, 8, \"td\", 11);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(18, 14);\n    i0.ɵɵtemplate(19, RevFinalizeComponent_div_0_th_19_Template, 2, 0, \"th\", 10);\n    i0.ɵɵtemplate(20, RevFinalizeComponent_div_0_td_20_Template, 6, 0, \"td\", 15);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(21, 16);\n    i0.ɵɵtemplate(22, RevFinalizeComponent_div_0_th_22_Template, 2, 0, \"th\", 10);\n    i0.ɵɵtemplate(23, RevFinalizeComponent_div_0_td_23_Template, 5, 0, \"td\", 15);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(24, RevFinalizeComponent_div_0_tr_24_Template, 1, 0, \"tr\", 17);\n    i0.ɵɵtemplate(25, RevFinalizeComponent_div_0_tr_25_Template, 1, 0, \"tr\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"mat-paginator\", 19);\n    i0.ɵɵlistener(\"page\", function RevFinalizeComponent_div_0_Template_mat_paginator_page_26_listener($event) {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r30.pageChangeEvent($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"dataSource\", ctx_r0.dataSource);\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r0.displayedColumns)(\"matHeaderRowDefSticky\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r0.displayedColumns);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"length\", ctx_r0.totalRecords)(\"pageSize\", ctx_r0.pageSize)(\"pageIndex\", ctx_r0.pageIndex - 1)(\"pageSizeOptions\", i0.ɵɵpureFunction0(9, _c2));\n  }\n}\npdfMake.vfs = pdfFonts.pdfMake.vfs;\nexport class RevFinalizeComponent {\n  constructor(http, apiService, imageUploadServc, router) {\n    this.http = http;\n    this.apiService = apiService;\n    this.imageUploadServc = imageUploadServc;\n    this.router = router;\n    this.displayedColumns = ['ShptNmbr', 'Name', 'InsrDate', 'WHFile', 'CWFile'];\n    this.dataSource = new MatTableDataSource();\n    this.totalRecords = 0;\n    this.pageSize = 10;\n    this.pageIndex = 1;\n    this.showSpinner = false;\n    this.isLoading = false;\n    this.shpNo = '';\n    this.status = [];\n    this.shpNos = [];\n    this.shpDetailsForPdf = [];\n    this.shpDetailsForCSV = [];\n    this.apiResponseReceived = false;\n    this.shipmentData = [];\n    this.uploadSub = new Subscription();\n  }\n  pageChangeEvent(event) {\n    this.pageIndex = event.pageIndex + 1;\n    this.pageSize = event.pageSize;\n    this.getShipments();\n  }\n  ngOnInit() {\n    this.getShipments();\n  }\n  getShipments() {\n    this.showSpinner = true;\n    Swal.showLoading();\n    this.apiService.getUpdatedShipments(this.pageIndex, this.pageSize).subscribe(response => {\n      this.shipmentData = response.items;\n      this.dataSource.data = this.shipmentData;\n      this.totalRecords = response.totalCount;\n      this.apiService.sts = [];\n      for (const obj of response.items) {\n        this.status.push(obj.sts);\n        this.shpNos.push(obj.shpNmbr);\n      }\n      //this.dataSource.paginator = this.paginator;\n    }, error => {\n      console.log(\"Api call failed\", error);\n      Swal.close();\n    }, () => {\n      Swal.close();\n      //this.isLoading=false;\n    });\n  }\n\n  getDetailByIdForPdf(shipmentNo) {\n    this.apiService.getShipmentsById(shipmentNo).subscribe(response => {\n      debugger;\n      this.transformData(response.items[0]);\n      this.totalRecords = response.totalCount;\n      console.log('details data ' + response.items);\n      this.apiResponseReceived = true;\n      this.generatePdf();\n    });\n  }\n  getDetailByIdForExcel(shipmentNo) {\n    this.apiService.getShipmentsById(shipmentNo).subscribe(response => {\n      debugger;\n      this.transformData(response.items[0]);\n      this.totalRecords = response.totalCount;\n      console.log('details data ' + response.items);\n      this.apiResponseReceived = true;\n      this.exportToExcel();\n    });\n  }\n  getDetailByIdForCsv(shipmentNo) {\n    this.apiService.getShipmentsById(shipmentNo).subscribe(response => {\n      debugger;\n      this.transformCWData(response.items[0]);\n      this.totalRecords = response.totalCount;\n      console.log('details data ' + response.items);\n      this.apiResponseReceived = true;\n      this.exportToCSV();\n    });\n  }\n  transformData(data) {\n    const displayedItems = [];\n    const dimensionCollection = data.dimensionCollection;\n    if (dimensionCollection) {\n      const weightCollection = data.weightCollection;\n      dimensionCollection.forEach((dimensionItem, index) => {\n        const newItem = {\n          plt: index + 1,\n          lngth: dimensionItem.lngth,\n          width: dimensionItem.width,\n          height: dimensionItem.height,\n          dunit: dimensionItem.dUnit,\n          wght: weightCollection[index]?.wght || 0,\n          wunit: weightCollection[index]?.wUnit || '',\n          locn: dimensionItem.locn,\n          gooddesc: dimensionItem.goodDesc,\n          rcpNumber: dimensionItem.rcptNmbr,\n          sts: data.sts\n        };\n        displayedItems.push(newItem);\n      });\n    }\n    this.shpDetailsForPdf = displayedItems;\n  }\n  transformCWData(data) {\n    debugger;\n    const displayedItems = [];\n    const dimensionCollection = data.dimensionCollection;\n    const weightCollection = data.weightCollection;\n    if (dimensionCollection) {\n      // Create a map to group items by their dimensions\n      const dimensionMap = new Map();\n      dimensionCollection.forEach((dimensionItem, index) => {\n        // Generate a key for the current dimensions\n        const key = `${dimensionItem.lngth}-${dimensionItem.width}-${dimensionItem.height}-${dimensionItem.dUnit}`;\n        // Check if an item with the same dimensions exists in the map\n        if (dimensionMap.has(key)) {\n          // If exists, update weight and packs\n          const existingItem = dimensionMap.get(key);\n          existingItem.wght += weightCollection[index]?.wght || 0;\n          existingItem.plt++;\n        } else {\n          // If not, create a new item and add it to the map\n          const newItem = {\n            plt: 1,\n            lngth: dimensionItem.lngth,\n            width: dimensionItem.width,\n            height: dimensionItem.height,\n            dunit: dimensionItem.dUnit,\n            wght: weightCollection[index]?.wght || 0,\n            wunit: weightCollection[index]?.wUnit || '',\n            locn: dimensionItem.locn,\n            gooddesc: dimensionItem.goodDesc,\n            rcpNumber: dimensionItem.rcptNmbr,\n            sts: data.sts\n          };\n          dimensionMap.set(key, newItem);\n        }\n      });\n      // Convert the map values to an array\n      displayedItems.push(...dimensionMap.values());\n    }\n    this.shpDetailsForCSV = displayedItems;\n  }\n  exportToExcel() {\n    if (this.apiResponseReceived) {\n      const ws = XLSX.utils.json_to_sheet(this.shpDetailsForPdf);\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, 'data');\n      XLSX.writeFile(wb, 'Finalized Warehouse Data.xlsx');\n    } else {\n      console.error('API response has not been received yet. Unable to export to pdf.');\n    }\n  }\n  // exportToExcel(): void {\n  //   if (this.apiResponseReceived) {\n  //     const columnNames = ['PLT', 'L', 'W', 'H', 'UD', 'W', 'UW'];\n  //     const headerRow = [columnNames];\n  //     const dataRows = this.shpDetailsForPdf.map(item =>\n  //       columnNames.map(columnName => item.pl)\n  //     );\n  //     const ws: XLSX.WorkSheet = XLSX.utils.book_new();\n  //     XLSX.utils.sheet_add_json(ws, headerRow, { origin: 'A1', skipHeader: true });\n  //     XLSX.utils.sheet_add_json(ws, dataRows, { origin: 'A2', skipHeader: false });\n  //     const wb: XLSX.WorkBook = XLSX.utils.book_new();\n  //     XLSX.utils.book_append_sheet(wb, ws, 'data');\n  //     XLSX.writeFile(wb, 'Finalized Warehouse Data.xlsx');\n  //   } else {\n  //     console.error('API response has not been received yet. Unable to export to excel.');\n  //   }\n  // }\n  exportToCSV() {\n    const columnNames = ['PLT#', 'L', 'W', 'H', 'UD', 'Weight (KGM)', 'UW', 'Location', 'Goods Description', 'Receipt Number', 'Status'];\n    const dataWithColumnNames = [...this.shpDetailsForCSV.map(item => {\n      debugger;\n      return [item.plt, item.lngth, item.width, item.height, item.dunit, item.wght, item.wunit, item.locn, item.goodDesc, item.rcpNumber, item.sts];\n    })];\n    const csv = Papa.unparse({\n      fields: columnNames,\n      data: dataWithColumnNames\n    });\n    const blob = new Blob([csv], {\n      type: 'text/csv;charset=utf-8;'\n    });\n    const link = document.createElement('a');\n    if (link.download !== undefined) {\n      const url = URL.createObjectURL(blob);\n      link.setAttribute('href', url);\n      link.setAttribute('download', 'Finalized CW Data.csv');\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  }\n  generatePdf() {\n    if (this.apiResponseReceived) {\n      const tableBody = this.shpDetailsForPdf.map(item => [item.plt, item.lngth, item.width, item.height, item.dunit, item.wght, item.wunit]);\n      const pdfDefinition = {\n        pageSize: 'A4',\n        pageMargins: [40, 50, 40, 40],\n        defaultStyle: {\n          columnGap: 10\n        },\n        header: {\n          alignment: 'center',\n          text: 'Project: WARE HOUSE MANAGEMENT- Priority WorldWide',\n          style: 'header'\n        },\n        content: [{\n          columns: [{\n            text: 'P.O.',\n            style: 'subheader'\n          }, {\n            alignment: 'center',\n            text: 'Truck # 55',\n            style: 'subheader'\n          }, {\n            alignment: 'center',\n            text: 'Supplier: zz',\n            style: 'subheader'\n          }, {\n            alignment: 'center',\n            text: 'DATE: 31-1-24',\n            style: 'subheader'\n          }]\n        }, {\n          block: {\n            margin: [0, 60, 0, 0]\n          },\n          table: {\n            widths: ['*', '*', '*', '*', '*', '*', '*'],\n            body: [['PLT', 'L', 'W', 'H', 'UD', 'W', 'UW'], ...tableBody\n            // ['1', '48\\'', '40\"', '86', '169', '27'],\n            // ['2', '84', '174', '28', '3', '85'],\n            // ['22', '87', '259', '23', '87', '238'],\n            // ['23', '87', '238', '24', '85', '243'],\n            // ['24', '85', '243', '25', '83', '202'],\n            // ['25', '83', '202', '6', '87', '27']\n            ]\n          }\n        }],\n\n        styles: {\n          header: {\n            bold: true,\n            fontSize: 14\n          },\n          subheader: {\n            fontSize: 12\n          }\n        }\n      };\n      pdfMake.createPdf(pdfDefinition).download('Finalized Warehouse Data.pdf');\n    } else {\n      console.error('API response has not been received yet. Unable to export to pdf.');\n    }\n  }\n  static #_ = this.ɵfac = function RevFinalizeComponent_Factory(t) {\n    return new (t || RevFinalizeComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.ImageuploadService), i0.ɵɵdirectiveInject(i4.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RevFinalizeComponent,\n    selectors: [[\"app-rev-finalize\"]],\n    viewQuery: function RevFinalizeComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n      }\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"table-container\", 4, \"ngIf\"], [1, \"table-container\"], [1, \"card-bg\"], [1, \"card-content\"], [1, \"logo-container\"], [\"src\", \"\\\\assets\\\\logo-img.png\", \"alt\", \"Logo\", 1, \"logo\"], [1, \"text-container\"], [\"class\", \"loader-overlay\", 4, \"ngIf\"], [\"mat-table\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"ShptNmbr\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 3, \"ngClass\", 4, \"matCellDef\"], [\"matColumnDef\", \"Name\"], [\"matColumnDef\", \"InsrDate\"], [\"matColumnDef\", \"WHFile\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"CWFile\"], [\"mat-header-row\", \"\", \"class\", \"header-row\", 4, \"matHeaderRowDef\", \"matHeaderRowDefSticky\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", 3, \"length\", \"pageSize\", \"pageIndex\", \"pageSizeOptions\", \"page\"], [1, \"loader-overlay\"], [1, \"loader\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\", 3, \"ngClass\"], [\"mat-cell\", \"\"], [1, \"button-container\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"csv-button\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"excel-button\", 3, \"click\"], [\"mat-header-row\", \"\", 1, \"header-row\"], [\"mat-row\", \"\"]],\n    template: function RevFinalizeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, RevFinalizeComponent_div_0_Template, 27, 10, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.dataSource);\n      }\n    },\n    dependencies: [i5.NgClass, i5.NgIf, i6.MatButton, i7.MatTable, i7.MatHeaderCellDef, i7.MatHeaderRowDef, i7.MatColumnDef, i7.MatCellDef, i7.MatRowDef, i7.MatHeaderCell, i7.MatCell, i7.MatHeaderRow, i7.MatRow, i8.MatPaginator, i9.MatCard, i9.MatCardContent, i5.DatePipe],\n    styles: [\".mat-cell[_ngcontent-%COMP%] {\\n    border-bottom: 2px solid #ccc; \\n  }\\n  \\n  .mat-header-cell[_ngcontent-%COMP%] {\\n    border-bottom: 2px solid teal; \\n    background-color: teal; \\n  }\\n\\n  table[_ngcontent-%COMP%] {\\n    width: 100%;\\n  background: slategray;\\n  padding: 0px;\\n  }\\n  .mat-mdc-row[_ngcontent-%COMP%]{\\n    color: white;\\n  }\\n  \\n  .mat-header-row[_ngcontent-%COMP%]{\\n   background: teal;\\n   background-color: teal; \\n  }\\n  .mat-row[_ngcontent-%COMP%]  {\\n    padding: 100px;\\n  }\\n  .mat-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{\\n    position: relative;\\n  }\\n  .mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n    height: 100%;\\n    padding-top: 1rem;\\n    padding-bottom: 1rem;\\n    border-bottom: none;\\n    position: relative;\\n    z-index: 1;\\n  }\\n  \\n  .mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]::before {\\n    content: '';\\n    background-color: white;\\n    width: 100%;\\n    height: calc(100% - 0.5rem);\\n    position: absolute;\\n    left: 0;\\n    right: 0;\\n    top: 0;\\n    bottom: 0;\\n    margin: auto;\\n    border-bottom: 1px solid lightgray;\\n    border-top: 1px solid lightgray;\\n  }\\n  \\n  \\n  .mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child:before {\\n    border-left: 1px solid lightgray;\\n    border-top-left-radius: 1px solid lightgray;\\n    border-top-left-radius: 7px;\\n    border-bottom-left-radius: 7px;\\n  }\\n  \\n  .mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child:before {\\n    border-right: 1px solid lightgray;\\n    border-top-right-radius: 1px solid lightgray;\\n    border-top-right-radius: 7px;\\n    border-bottom-right-radius: 7px;\\n  }\\n  \\n  .mat-row[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]::before {\\n    border-color: gray;\\n  }\\n  \\n  .mat-elevation-z8[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .mat-elevation-z8[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n    border: 1px solid lightgray; \\n\\n    padding: 8px;\\n    text-align: left;\\n  }\\n\\n  .header-row[_ngcontent-%COMP%] {\\n    background-color: teal; \\n    color: white;\\n  }\\n  \\n  .back-btn[_ngcontent-%COMP%] {\\n    margin-top: -5%;\\n    margin-left: 50%;\\n  }\\n  \\n  \\n\\n  @media (max-width: 820px) {\\n    .back-btn[_ngcontent-%COMP%] {\\n      margin-top: 1%;\\n      margin-left: 25%;\\n    }\\n  }\\n  \\n  .card-content[_ngcontent-%COMP%] {\\n    font-size: 20px;\\n    font-family: 'Arial', sans-serif;\\n    font-weight: bold;\\n    color: black;\\n    height: 40px;\\n  }\\n  \\n  .mat-card[_ngcontent-%COMP%] {\\n    background-color: burlywood;\\n    border: 1px solid rosybrown;\\n    border-radius: 5px;\\n    box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.1);\\n  }\\n  \\n  .card-bg[_ngcontent-%COMP%] {\\n    background-color: white;\\n  }\\n  \\n  .logo-container[_ngcontent-%COMP%] {\\n    margin-right: 10px;\\n  }\\n  \\n  .logo[_ngcontent-%COMP%] {\\n    width: 150px;\\n    height: 30px;\\n  }\\n  \\n  .text-container[_ngcontent-%COMP%] {\\n    margin-left: 0px;\\n  }\\n  \\n  \\n\\n  \\n  .loader-overlay[_ngcontent-%COMP%] {\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    background: rgba(255, 255, 255, 0.8);\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    z-index: 9999;\\n  }\\n  \\n  .loader[_ngcontent-%COMP%] {\\n    border: 8px solid #f3f3f3;\\n    border-top: 8px solid #3498db;\\n    border-radius: 50%;\\n    width: 50px;\\n    height: 50px;\\n    animation: _ngcontent-%COMP%_spin 1s linear infinite;\\n  }\\n  \\n  @keyframes _ngcontent-%COMP%_spin {\\n    0% { transform: rotate(0deg); }\\n    100% { transform: rotate(360deg); }\\n  }\\n  \\n\\n  .button-container[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-around;\\n  }\\n  \\n  \\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcmV2LWZpbmFsaXplL3Jldi1maW5hbGl6ZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksNkJBQTZCO0VBQy9COztFQUVBO0lBQ0UsNkJBQTZCO0lBQzdCLHNCQUFzQjtFQUN4Qjs7RUFFQTtJQUNFLFdBQVc7RUFDYixxQkFBcUI7RUFDckIsWUFBWTtFQUNaO0VBQ0E7SUFDRSxZQUFZO0VBQ2Q7O0VBRUE7R0FDQyxnQkFBZ0I7R0FDaEIsc0JBQXNCO0VBQ3ZCO0VBQ0E7SUFDRSxjQUFjO0VBQ2hCO0VBQ0E7SUFDRSxrQkFBa0I7RUFDcEI7RUFDQTtJQUNFLFlBQVk7SUFDWixpQkFBaUI7SUFDakIsb0JBQW9CO0lBQ3BCLG1CQUFtQjtJQUNuQixrQkFBa0I7SUFDbEIsVUFBVTtFQUNaOztFQUVBO0lBQ0UsV0FBVztJQUNYLHVCQUF1QjtJQUN2QixXQUFXO0lBQ1gsMkJBQTJCO0lBQzNCLGtCQUFrQjtJQUNsQixPQUFPO0lBQ1AsUUFBUTtJQUNSLE1BQU07SUFDTixTQUFTO0lBQ1QsWUFBWTtJQUNaLGtDQUFrQztJQUNsQywrQkFBK0I7RUFDakM7OztFQUdBO0lBQ0UsZ0NBQWdDO0lBQ2hDLDJDQUEyQztJQUMzQywyQkFBMkI7SUFDM0IsOEJBQThCO0VBQ2hDOztFQUVBO0lBQ0UsaUNBQWlDO0lBQ2pDLDRDQUE0QztJQUM1Qyw0QkFBNEI7SUFDNUIsK0JBQStCO0VBQ2pDOztFQUVBO0lBQ0Usa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsMkJBQTJCLEVBQUUsaUJBQWlCO0lBQzlDLFlBQVk7SUFDWixnQkFBZ0I7RUFDbEI7O0VBRUE7SUFDRSxzQkFBc0I7SUFDdEIsWUFBWTtFQUNkOztFQUVBO0lBQ0UsZUFBZTtJQUNmLGdCQUFnQjtFQUNsQjs7RUFFQSw2Q0FBNkM7RUFDN0M7SUFDRTtNQUNFLGNBQWM7TUFDZCxnQkFBZ0I7SUFDbEI7RUFDRjs7RUFFQTtJQUNFLGVBQWU7SUFDZixnQ0FBZ0M7SUFDaEMsaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixZQUFZO0VBQ2Q7O0VBRUE7SUFDRSwyQkFBMkI7SUFDM0IsMkJBQTJCO0lBQzNCLGtCQUFrQjtJQUNsQiw4Q0FBOEM7RUFDaEQ7O0VBRUE7SUFDRSx1QkFBdUI7RUFDekI7O0VBRUE7SUFDRSxrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxZQUFZO0lBQ1osWUFBWTtFQUNkOztFQUVBO0lBQ0UsZ0JBQWdCO0VBQ2xCOztFQUVBLDRCQUE0Qjs7RUFFNUI7SUFDRSxlQUFlO0lBQ2YsTUFBTTtJQUNOLE9BQU87SUFDUCxXQUFXO0lBQ1gsWUFBWTtJQUNaLG9DQUFvQztJQUNwQyxhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQixhQUFhO0VBQ2Y7O0VBRUE7SUFDRSx5QkFBeUI7SUFDekIsNkJBQTZCO0lBQzdCLGtCQUFrQjtJQUNsQixXQUFXO0lBQ1gsWUFBWTtJQUNaLGtDQUFrQztFQUNwQzs7RUFFQTtJQUNFLEtBQUssdUJBQXVCLEVBQUU7SUFDOUIsT0FBTyx5QkFBeUIsRUFBRTtFQUNwQzs7O0VBR0E7SUFDRSxhQUFhO0lBQ2IsNkJBQTZCO0VBQy9CIiwic291cmNlc0NvbnRlbnQiOlsiLm1hdC1jZWxsIHtcclxuICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjY2NjOyBcclxuICB9XHJcbiAgXHJcbiAgLm1hdC1oZWFkZXItY2VsbCB7XHJcbiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdGVhbDsgXHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0ZWFsOyBcclxuICB9XHJcblxyXG4gIHRhYmxlIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gIGJhY2tncm91bmQ6IHNsYXRlZ3JheTtcclxuICBwYWRkaW5nOiAwcHg7XHJcbiAgfVxyXG4gIC5tYXQtbWRjLXJvd3tcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICB9XHJcbiAgXHJcbiAgLm1hdC1oZWFkZXItcm93e1xyXG4gICBiYWNrZ3JvdW5kOiB0ZWFsO1xyXG4gICBiYWNrZ3JvdW5kLWNvbG9yOiB0ZWFsOyBcclxuICB9XHJcbiAgLm1hdC1yb3cgIHtcclxuICAgIHBhZGRpbmc6IDEwMHB4O1xyXG4gIH1cclxuICAubWF0LXJvdyBzcGFue1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gIH1cclxuICAubWF0LXJvdyB0ZCB7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBwYWRkaW5nLXRvcDogMXJlbTtcclxuICAgIHBhZGRpbmctYm90dG9tOiAxcmVtO1xyXG4gICAgYm9yZGVyLWJvdHRvbTogbm9uZTtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIHotaW5kZXg6IDE7XHJcbiAgfVxyXG4gIFxyXG4gIC5tYXQtcm93IHRkOjpiZWZvcmUge1xyXG4gICAgY29udGVudDogJyc7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAwLjVyZW0pO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbGVmdDogMDtcclxuICAgIHJpZ2h0OiAwO1xyXG4gICAgdG9wOiAwO1xyXG4gICAgYm90dG9tOiAwO1xyXG4gICAgbWFyZ2luOiBhdXRvO1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGxpZ2h0Z3JheTtcclxuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCBsaWdodGdyYXk7XHJcbiAgfVxyXG4gIFxyXG4gIFxyXG4gIC5tYXQtcm93IHRkOmZpcnN0LWNoaWxkOmJlZm9yZSB7XHJcbiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIGxpZ2h0Z3JheTtcclxuICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDFweCBzb2xpZCBsaWdodGdyYXk7XHJcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA3cHg7XHJcbiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA3cHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5tYXQtcm93IHRkOmxhc3QtY2hpbGQ6YmVmb3JlIHtcclxuICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIGxpZ2h0Z3JheTtcclxuICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAxcHggc29saWQgbGlnaHRncmF5O1xyXG4gICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDdweDtcclxuICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA3cHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5tYXQtcm93OmhvdmVyIHRkOjpiZWZvcmUge1xyXG4gICAgYm9yZGVyLWNvbG9yOiBncmF5O1xyXG4gIH1cclxuICBcclxuICAubWF0LWVsZXZhdGlvbi16OCB0aCwgLm1hdC1lbGV2YXRpb24tejggdGQge1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgbGlnaHRncmF5OyAvKiBCb3JkZXIgY29sb3IgKi9cclxuICAgIHBhZGRpbmc6IDhweDtcclxuICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgfVxyXG5cclxuICAuaGVhZGVyLXJvdyB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0ZWFsOyBcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICB9XHJcbiAgXHJcbiAgLmJhY2stYnRuIHtcclxuICAgIG1hcmdpbi10b3A6IC01JTtcclxuICAgIG1hcmdpbi1sZWZ0OiA1MCU7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIGZvciB0YWJsZXRzIHNldCB0aGUgQmFjayBidXR0b24gcG9zaXRpb24gKi9cclxuICBAbWVkaWEgKG1heC13aWR0aDogODIwcHgpIHtcclxuICAgIC5iYWNrLWJ0biB7XHJcbiAgICAgIG1hcmdpbi10b3A6IDElO1xyXG4gICAgICBtYXJnaW4tbGVmdDogMjUlO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAuY2FyZC1jb250ZW50IHtcclxuICAgIGZvbnQtc2l6ZTogMjBweDtcclxuICAgIGZvbnQtZmFtaWx5OiAnQXJpYWwnLCBzYW5zLXNlcmlmO1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBjb2xvcjogYmxhY2s7XHJcbiAgICBoZWlnaHQ6IDQwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5tYXQtY2FyZCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBidXJseXdvb2Q7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCByb3N5YnJvd247XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICBib3gtc2hhZG93OiAwcHggMnB4IDVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG4gIH1cclxuICBcclxuICAuY2FyZC1iZyB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICB9XHJcbiAgXHJcbiAgLmxvZ28tY29udGFpbmVyIHtcclxuICAgIG1hcmdpbi1yaWdodDogMTBweDtcclxuICB9XHJcbiAgXHJcbiAgLmxvZ28ge1xyXG4gICAgd2lkdGg6IDE1MHB4O1xyXG4gICAgaGVpZ2h0OiAzMHB4O1xyXG4gIH1cclxuICBcclxuICAudGV4dC1jb250YWluZXIge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDBweDtcclxuICB9XHJcbiAgXHJcbiAgLyogZm9yIG1hdHB0b2dyZXNzIHNwaW5uZXIgKi9cclxuICBcclxuICAubG9hZGVyLW92ZXJsYXkge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgdG9wOiAwO1xyXG4gICAgbGVmdDogMDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIHotaW5kZXg6IDk5OTk7XHJcbiAgfVxyXG4gIFxyXG4gIC5sb2FkZXIge1xyXG4gICAgYm9yZGVyOiA4cHggc29saWQgI2YzZjNmMztcclxuICAgIGJvcmRlci10b3A6IDhweCBzb2xpZCAjMzQ5OGRiO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgd2lkdGg6IDUwcHg7XHJcbiAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xyXG4gIH1cclxuICBcclxuICBAa2V5ZnJhbWVzIHNwaW4ge1xyXG4gICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxyXG4gICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cclxuICB9XHJcbiAgXHJcblxyXG4gIC5idXR0b24tY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcclxuICB9XHJcbiAgXHJcbiAgXHJcbiAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["MatTableDataSource","Subscription","Swal","XLSX","Papa","pdfMake","pdfFonts","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵproperty","ɵɵpureFunction2","_c1","i_r15","ɵɵadvance","ɵɵtextInterpolate1","element_r14","shpNmbr","i_r17","element_r16","name","i_r19","ɵɵpipeBind2","element_r18","insrDate","ɵɵlistener","RevFinalizeComponent_div_0_td_20_Template_button_click_2_listener","restoredCtx","ɵɵrestoreView","_r23","element_r20","$implicit","ctx_r22","ɵɵnextContext","ɵɵresetView","getDetailByIdForPdf","RevFinalizeComponent_div_0_td_20_Template_button_click_4_listener","ctx_r24","getDetailByIdForExcel","ɵɵelementContainerStart","RevFinalizeComponent_div_0_td_23_Template_button_click_3_listener","_r28","element_r25","ctx_r27","getDetailByIdForCsv","ɵɵelementContainerEnd","ɵɵtemplate","RevFinalizeComponent_div_0_div_7_Template","RevFinalizeComponent_div_0_th_10_Template","RevFinalizeComponent_div_0_td_11_Template","RevFinalizeComponent_div_0_th_13_Template","RevFinalizeComponent_div_0_td_14_Template","RevFinalizeComponent_div_0_th_16_Template","RevFinalizeComponent_div_0_td_17_Template","RevFinalizeComponent_div_0_th_19_Template","RevFinalizeComponent_div_0_td_20_Template","RevFinalizeComponent_div_0_th_22_Template","RevFinalizeComponent_div_0_td_23_Template","RevFinalizeComponent_div_0_tr_24_Template","RevFinalizeComponent_div_0_tr_25_Template","RevFinalizeComponent_div_0_Template_mat_paginator_page_26_listener","$event","_r31","ctx_r30","pageChangeEvent","ctx_r0","isLoading","dataSource","displayedColumns","totalRecords","pageSize","pageIndex","ɵɵpureFunction0","_c2","vfs","RevFinalizeComponent","constructor","http","apiService","imageUploadServc","router","showSpinner","shpNo","status","shpNos","shpDetailsForPdf","shpDetailsForCSV","apiResponseReceived","shipmentData","uploadSub","event","getShipments","ngOnInit","showLoading","getUpdatedShipments","subscribe","response","items","data","totalCount","sts","obj","push","error","console","log","close","shipmentNo","getShipmentsById","transformData","generatePdf","exportToExcel","transformCWData","exportToCSV","displayedItems","dimensionCollection","weightCollection","forEach","dimensionItem","index","newItem","plt","lngth","width","height","dunit","dUnit","wght","wunit","wUnit","locn","gooddesc","goodDesc","rcpNumber","rcptNmbr","dimensionMap","Map","key","has","existingItem","get","set","values","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","columnNames","dataWithColumnNames","map","item","csv","unparse","fields","blob","Blob","type","link","document","createElement","download","undefined","url","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild","tableBody","pdfDefinition","pageMargins","defaultStyle","columnGap","header","alignment","text","style","content","columns","block","margin","table","widths","styles","bold","fontSize","subheader","createPdf","_","ɵɵdirectiveInject","i1","HttpClient","i2","ApiService","i3","ImageuploadService","i4","Router","_2","selectors","viewQuery","RevFinalizeComponent_Query","rf","ctx","RevFinalizeComponent_div_0_Template"],"sources":["D:\\PWS\\WareHouseManagement\\src\\app\\rev-finalize\\rev-finalize.component.ts","D:\\PWS\\WareHouseManagement\\src\\app\\rev-finalize\\rev-finalize.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { Subscription } from 'rxjs';\r\nimport { ApiService } from '../Services/api.service';\r\nimport { ImageuploadService } from '../Services/imageupload.service';\r\nimport { Router } from '@angular/router';\r\nimport { MatPaginator, PageEvent } from '@angular/material/paginator';\r\nimport Swal from 'sweetalert2';\r\nimport * as XLSX from 'xlsx';\r\nimport * as Papa from 'papaparse';\r\nimport * as pdfMake from 'pdfmake/build/pdfmake';\r\nimport * as pdfFonts from 'pdfmake/build/vfs_fonts';\r\n  \r\n  (<any>pdfMake).vfs = pdfFonts.pdfMake.vfs;\r\n\r\n  interface DisplayedItem {\r\n    lngth: number;\r\n    width: number;\r\n    height: number;\r\n    dunit: string;\r\n    wght: number;\r\n    wunit: string;\r\n    locn: string;\r\n    gooddesc: string;\r\n  plt: number;\r\n  rcpNumber:string;\r\n  sts:string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-rev-finalize',\r\n  templateUrl: './rev-finalize.component.html',\r\n  styleUrls: ['./rev-finalize.component.css']\r\n})\r\nexport class RevFinalizeComponent implements OnInit{\r\n\r\n\r\n  @ViewChild('paginator', { static: true }) paginator!: MatPaginator;\r\n  displayedColumns: string[] = ['ShptNmbr','Name','InsrDate','WHFile','CWFile'];\r\n  dataSource = new MatTableDataSource<any>();\r\n  shipmentData: any[];\r\n  totalRecords = 0;\r\n  pageSize = 10;\r\n  pageIndex = 1;\r\n  showSpinner: boolean = false;\r\n  uploadSub: Subscription;\r\n  isLoading=false;\r\n  shpNo:string = '';\r\n  status:any[]=[];\r\n  shpNos:any[]=[];\r\n  shpDetailsForPdf:any[]=[];\r\n  shpDetailsForCSV:any[]=[];\r\n  apiResponseReceived=false;\r\n  constructor(private http: HttpClient,private apiService: ApiService,private imageUploadServc:ImageuploadService,private router: Router){\r\n    this.shipmentData=[];\r\n    this.uploadSub = new Subscription();\r\n  }\r\n\r\n  pageChangeEvent(event: PageEvent) {\r\n    this.pageIndex = event.pageIndex + 1;\r\n    this.pageSize = event.pageSize;\r\n    this.getShipments();\r\n  }\r\n\r\n  \r\n  ngOnInit(): void {\r\n    this.getShipments();\r\n  }\r\n \r\n  \r\n  getShipments(){\r\n    this.showSpinner = true; \r\n   Swal.showLoading();\r\n    this.apiService.getUpdatedShipments(this.pageIndex,this.pageSize).subscribe(\r\n      (response:any)=>{\r\n        this.shipmentData=response.items;\r\n        this.dataSource.data=this.shipmentData;\r\n        this.totalRecords=response.totalCount;\r\n        this.apiService.sts =[];\r\n        for(const obj of response.items){\r\n             this.status.push(obj.sts);\r\n             this.shpNos.push(obj.shpNmbr);\r\n        }\r\n        //this.dataSource.paginator = this.paginator;\r\n      },\r\n      (error)=>{\r\n        console.log(\"Api call failed\",error);\r\n        Swal.close();\r\n      },\r\n      () => {\r\n        Swal.close();\r\n        //this.isLoading=false;\r\n    }\r\n    );\r\n  }\r\n\r\n   getDetailByIdForPdf(shipmentNo:string){\r\n     this.apiService.getShipmentsById(shipmentNo).subscribe(\r\n     (response:any)=>{\r\n      debugger;\r\n      this.transformData(response.items[0]);\r\n      this.totalRecords = response.totalCount;\r\n      console.log('details data '+response.items);\r\n      this.apiResponseReceived = true;\r\n      this.generatePdf();\r\n     });\r\n  }\r\n\r\n  getDetailByIdForExcel(shipmentNo:string){\r\n    this.apiService.getShipmentsById(shipmentNo).subscribe(\r\n    (response:any)=>{\r\n     debugger;\r\n     this.transformData(response.items[0]);\r\n     this.totalRecords = response.totalCount;\r\n     console.log('details data '+response.items);\r\n     this.apiResponseReceived = true;\r\n     this.exportToExcel();\r\n    });\r\n }\r\n\r\n getDetailByIdForCsv(shipmentNo:string){\r\n  this.apiService.getShipmentsById(shipmentNo).subscribe(\r\n  (response:any)=>{\r\n   debugger;\r\n   this.transformCWData(response.items[0]);\r\n   this.totalRecords = response.totalCount;\r\n   console.log('details data '+response.items);\r\n   this.apiResponseReceived = true;\r\n   this.exportToCSV();\r\n  });\r\n}\r\n\r\n   transformData(data: any) {\r\n    const displayedItems: DisplayedItem[] = [];\r\n    const dimensionCollection: any[] = data.dimensionCollection;\r\n    if (dimensionCollection) {\r\n        const weightCollection = data.weightCollection;\r\n        dimensionCollection.forEach((dimensionItem: any, index: number) => { \r\n            const newItem: DisplayedItem = {\r\n                plt: index+1,\r\n                lngth: dimensionItem.lngth,\r\n                width: dimensionItem.width,\r\n                height: dimensionItem.height,\r\n                dunit: dimensionItem.dUnit,\r\n                wght: weightCollection[index]?.wght || 0, \r\n                wunit: weightCollection[index]?.wUnit || '', \r\n                locn: dimensionItem.locn,\r\n                gooddesc: dimensionItem.goodDesc,\r\n                rcpNumber:dimensionItem.rcptNmbr,\r\n                sts: data.sts\r\n            };\r\n            \r\n            displayedItems.push(newItem);\r\n        });\r\n    }\r\n    this.shpDetailsForPdf = displayedItems;\r\n   \r\n}\r\n\r\ntransformCWData(data: any) {\r\n  debugger;\r\n  const displayedItems: DisplayedItem[] = [];\r\n  const dimensionCollection: any[] = data.dimensionCollection;\r\n  const weightCollection = data.weightCollection;\r\n\r\n  if (dimensionCollection) {\r\n    // Create a map to group items by their dimensions\r\n    const dimensionMap = new Map<string, DisplayedItem>();\r\n\r\n    dimensionCollection.forEach((dimensionItem: any, index: number) => {\r\n      // Generate a key for the current dimensions\r\n      const key = `${dimensionItem.lngth}-${dimensionItem.width}-${dimensionItem.height}-${dimensionItem.dUnit}`;\r\n\r\n      // Check if an item with the same dimensions exists in the map\r\n      if (dimensionMap.has(key)) {\r\n        // If exists, update weight and packs\r\n        const existingItem = dimensionMap.get(key)!;\r\n        existingItem.wght += weightCollection[index]?.wght || 0;\r\n        existingItem.plt++;\r\n      } else {\r\n        // If not, create a new item and add it to the map\r\n        const newItem: DisplayedItem = {\r\n          plt: 1,\r\n          lngth: dimensionItem.lngth,\r\n          width: dimensionItem.width,\r\n          height: dimensionItem.height,\r\n          dunit: dimensionItem.dUnit,\r\n          wght: weightCollection[index]?.wght || 0,\r\n          wunit: weightCollection[index]?.wUnit || '',\r\n          locn: dimensionItem.locn,\r\n          gooddesc: dimensionItem.goodDesc,\r\n          rcpNumber: dimensionItem.rcptNmbr,\r\n          sts:data.sts\r\n        };\r\n        dimensionMap.set(key, newItem);\r\n      }\r\n    });\r\n\r\n    // Convert the map values to an array\r\n    displayedItems.push(...dimensionMap.values());\r\n  }\r\n\r\n  this.shpDetailsForCSV = displayedItems;\r\n}\r\n\r\n\r\n  exportToExcel(): void {\r\n\r\n\r\n      if(this.apiResponseReceived)\r\n      {\r\n       \r\n         const ws: XLSX.WorkSheet = XLSX.utils.json_to_sheet(this.shpDetailsForPdf);\r\n         const wb: XLSX.WorkBook = XLSX.utils.book_new();\r\n         XLSX.utils.book_append_sheet(wb, ws, 'data');\r\n         XLSX.writeFile(wb, 'Finalized Warehouse Data.xlsx');\r\n      }\r\n      else{\r\n        console.error('API response has not been received yet. Unable to export to pdf.');\r\n      }\r\n  }\r\n\r\n  // exportToExcel(): void {\r\n  //   if (this.apiResponseReceived) {\r\n  //     const columnNames = ['PLT', 'L', 'W', 'H', 'UD', 'W', 'UW'];\r\n  //     const headerRow = [columnNames];\r\n  //     const dataRows = this.shpDetailsForPdf.map(item =>\r\n  //       columnNames.map(columnName => item.pl)\r\n  //     );\r\n  \r\n  //     const ws: XLSX.WorkSheet = XLSX.utils.book_new();\r\n  //     XLSX.utils.sheet_add_json(ws, headerRow, { origin: 'A1', skipHeader: true });\r\n  //     XLSX.utils.sheet_add_json(ws, dataRows, { origin: 'A2', skipHeader: false });\r\n  \r\n  //     const wb: XLSX.WorkBook = XLSX.utils.book_new();\r\n  //     XLSX.utils.book_append_sheet(wb, ws, 'data');\r\n  //     XLSX.writeFile(wb, 'Finalized Warehouse Data.xlsx');\r\n  //   } else {\r\n  //     console.error('API response has not been received yet. Unable to export to excel.');\r\n  //   }\r\n  // }\r\n\r\n  exportToCSV(): void {\r\n\r\n    const columnNames = ['PLT#', 'L', 'W', 'H', 'UD', 'Weight (KGM)', 'UW', 'Location', 'Goods Description', 'Receipt Number', 'Status'];\r\n    const dataWithColumnNames = [...this.shpDetailsForCSV.map(item => {\r\n      debugger;\r\n      return [\r\n        item.plt,\r\n        item.lngth,\r\n        item.width,\r\n        item.height,\r\n        item.dunit,\r\n        item.wght,\r\n        item.wunit,\r\n        item.locn,\r\n        item.goodDesc,\r\n        item.rcpNumber,\r\n        item.sts\r\n      ];\r\n    })];\r\n  \r\n    const csv = Papa.unparse({\r\n      fields: columnNames,\r\n      data: dataWithColumnNames\r\n    });\r\n  \r\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    if (link.download !== undefined) {\r\n      const url = URL.createObjectURL(blob);\r\n      link.setAttribute('href', url);\r\n      link.setAttribute('download', 'Finalized CW Data.csv');\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    }\r\n  }\r\n\r\n  \r\n    \r\n    generatePdf() {\r\n\r\n      if(this.apiResponseReceived)\r\n      {\r\n        const tableBody = this.shpDetailsForPdf.map(item => [item.plt, item.lngth, item.width, item.height,item.dunit, item.wght,item.wunit]);\r\n        const pdfDefinition: any = {\r\n          pageSize: 'A4',\r\n          pageMargins: [40, 50, 40, 40],\r\n          defaultStyle: {\r\n            columnGap: 10\r\n          },\r\n          header: {\r\n            alignment: 'center',\r\n            text: 'Project: WARE HOUSE MANAGEMENT- Priority WorldWide',\r\n            style: 'header'\r\n          },\r\n          content: [\r\n            {\r\n              columns: [\r\n                {\r\n                  text: 'P.O.',\r\n                  style: 'subheader'\r\n                },\r\n                {\r\n                  alignment: 'center',\r\n                  text: 'Truck # 55',\r\n                  style: 'subheader'\r\n                },\r\n                {\r\n                  alignment: 'center',\r\n                  text: 'Supplier: zz',\r\n                  style: 'subheader'\r\n                },\r\n                {\r\n                  alignment: 'center',\r\n                  text: 'DATE: 31-1-24',\r\n                  style: 'subheader'\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              block: {\r\n                margin: [0, 60, 0, 0] \r\n              },\r\n              table: {\r\n                widths: ['*', '*', '*', '*', '*','*','*'],\r\n                body: [\r\n                  ['PLT', 'L', 'W', 'H','UD','W','UW'],\r\n                  ...tableBody\r\n                  // ['1', '48\\'', '40\"', '86', '169', '27'],\r\n                  // ['2', '84', '174', '28', '3', '85'],\r\n                  // ['22', '87', '259', '23', '87', '238'],\r\n                  // ['23', '87', '238', '24', '85', '243'],\r\n                  // ['24', '85', '243', '25', '83', '202'],\r\n                  // ['25', '83', '202', '6', '87', '27']\r\n                ]\r\n              }\r\n            }\r\n          ],\r\n          styles: {\r\n            header: {\r\n              bold: true,\r\n              fontSize: 14\r\n            },\r\n            subheader: {\r\n              fontSize: 12\r\n            }\r\n          }\r\n        };\r\n      \r\n        pdfMake.createPdf(pdfDefinition).download('Finalized Warehouse Data.pdf');\r\n      }\r\n      else{\r\n        console.error('API response has not been received yet. Unable to export to pdf.');\r\n      }\r\n      }\r\n      \r\n  }\r\n\r\n\r\n \r\n\r\n\r\n","<div class=\"table-container\"  *ngIf=\"dataSource\">\r\n  \r\n    <mat-card class=\"card-bg\">\r\n      <mat-card-content class=\"card-content\">\r\n        <div class=\"logo-container\">\r\n          <img src=\"\\assets\\logo-img.png\" alt=\"Logo\" class=\"logo\">\r\n        </div>\r\n        <div class=\"text-container\">\r\n          Review Finalized\r\n        </div>\r\n      </mat-card-content>\r\n    </mat-card>\r\n \r\n    <div class=\"loader-overlay\" *ngIf=\"isLoading\">\r\n      <div class=\"loader\"></div>\r\n    </div>\r\n    <table mat-table [dataSource]=\"dataSource\" class=\"mat-elevation-z8\">\r\n    <ng-container matColumnDef=\"ShptNmbr\">\r\n      <th mat-header-cell  *matHeaderCellDef> Shipment Number </th>\r\n      <td mat-cell *matCellDef=\"let element; let i = index\" [ngClass]=\"{ 'odd-row': i % 2 === 1, 'even-row': i % 2 === 0 }\"> {{ element.shpNmbr }} </td>\r\n    </ng-container>\r\n    \r\n    \r\n    <ng-container matColumnDef=\"Name\">\r\n      <th mat-header-cell *matHeaderCellDef> Client Name </th>\r\n      <td mat-cell *matCellDef=\"let element; let i = index\" [ngClass]=\"{ 'odd-row': i % 2 === 1, 'even-row': i % 2 === 0 }\"> {{ element.name }} </td>\r\n    </ng-container>\r\n    \r\n    \r\n    <ng-container matColumnDef=\"InsrDate\">\r\n      <th mat-header-cell *matHeaderCellDef>Date In</th>\r\n      <td mat-cell *matCellDef=\"let element; let i = index\" [ngClass]=\"{ 'odd-row': i % 2 === 1, 'even-row': i % 2 === 0 }\"> \r\n        {{ element.insrDate | date:'yyyy-MM-dd'  }} </td>\r\n    </ng-container>\r\n    \r\n    \r\n    <ng-container matColumnDef=\"WHFile\">\r\n      <th mat-header-cell *matHeaderCellDef>WareHouse File</th>\r\n      <td mat-cell *matCellDef=\"let element; let i = index\">   \r\n        <div class=\"button-container\">\r\n        <button mat-raised-button color=\"primary\" class=\"csv-button\"   (click)=\"getDetailByIdForPdf(element.shpNmbr)\">Export to Pdf</button>\r\n        <button mat-raised-button color=\"primary\" class=\"excel-button\" (click)=\"getDetailByIdForExcel(element.shpNmbr)\">Export to Excel</button>\r\n    </div>\r\n         </td>\r\n    </ng-container>\r\n    \r\n    <ng-container matColumnDef=\"CWFile\">\r\n      <th mat-header-cell *matHeaderCellDef>CW File</th>\r\n      <td mat-cell *matCellDef=\"let element; let i = index\">\r\n        <div class=\"button-container\">\r\n            <ng-container >\r\n              <button mat-raised-button color=\"primary\" class=\"csv-button\"   (click)=\"getDetailByIdForCsv(element.shpNmbr)\">Export to CSV</button> \r\n               </ng-container>\r\n                 </div>\r\n    </td>\r\n    </ng-container>\r\n     \r\n      <tr mat-header-row class=\"header-row\" *matHeaderRowDef=\"displayedColumns; sticky:true\"></tr>\r\n      <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\" ></tr>\r\n    </table>\r\n    <mat-paginator\r\n      [length]=\"totalRecords\"\r\n      [pageSize]=\"pageSize\"\r\n      [pageIndex]=\"pageIndex-1\"\r\n      (page)=\"pageChangeEvent($event)\"\r\n      [pageSizeOptions]=\"[5, 10,15, 20,25]\"\r\n      showFirstLastButtons>\r\n    </mat-paginator>\r\n    <!-- <button class=\"back-btn\" mat-raised-button color=\"primary\" (click)=\"backToShipment()\" type=\"submit\"><mat-icon>arrow_back</mat-icon>Back To Shipment</button> -->\r\n    </div>\r\n\r\n\r\n  \r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}