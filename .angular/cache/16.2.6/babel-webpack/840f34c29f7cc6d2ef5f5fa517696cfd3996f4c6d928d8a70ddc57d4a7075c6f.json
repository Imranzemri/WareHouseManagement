{"ast":null,"code":"import _asyncToGenerator from \"D:/PWS/WareHouseManagement/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { Shipment } from '../Models/shipment';\nimport Swal from 'sweetalert2';\nimport { Subscription, finalize } from 'rxjs';\nimport { HttpEventType } from '@angular/common/http';\nlet ReceivingComponent = class ReceivingComponent {\n  constructor(http, apiService, fb, qrCodeService, router, _service) {\n    this.http = http;\n    this.apiService = apiService;\n    this.fb = fb;\n    this.qrCodeService = qrCodeService;\n    this.router = router;\n    this._service = _service;\n    this.requiredFileType = '';\n    this.fileName = '';\n    this.uploadProgress = 0;\n    this.model = new Shipment();\n    this.uploadedImages = [];\n    this.qrCodeData = [];\n    this.emptyFields = [];\n    this.showSpinner = false;\n    this.validationStatus = {\n      clientName: true,\n      shipmentNo: true,\n      pieces: true,\n      dimensions: true,\n      weight: true,\n      bayLocation: true,\n      note: true,\n      images: true,\n      email: true\n    };\n    this.imagesArray = [];\n    this.dimensionsArray = [];\n    this.weightArray = [];\n    this.dimensionSelectedOption = '';\n    this.weightSelectedOption = '';\n    this.disableDimensionField = true;\n    this.disableWeightField = true;\n    this.disableAddbtn = true;\n    this.disableWghtAddBtn = true;\n    this.totalWeight = '';\n    this.totalDimnsn = '';\n    this.model = new Shipment();\n    this.form = this.fb.group({\n      file: ['']\n    });\n    this.imageBytes = null;\n    this.imagesArray = [];\n    this.dimensionsArray = [];\n    this.uploadSub = new Subscription();\n  }\n  dimensionOptionSelected(option) {\n    this.dimensionSelectedOption = option;\n    this.disableDimensionField = false;\n  }\n  weightOptionSelected(option) {\n    this.weightSelectedOption = option;\n    this.disableWeightField = false;\n  }\n  //for adding dimensions\n  addDimension(l, w, h) {\n    if (l == null || w == null || h == null) {\n      Swal.fire({\n        icon: 'info',\n        title: 'Information',\n        text: \"Please Enter Value\"\n      });\n      return;\n    }\n    if (this.dimensionSelectedOption == 'cm') {\n      if (this.model.Length == 0 || this.model.Length) {\n        this.model.Length += parseFloat(l);\n      }\n      if (this.model.Width == 0 || this.model.Width) {\n        this.model.Width += parseFloat(w);\n      }\n      if (this.model.Height == 0 || this.model.Height) {\n        this.model.Height += parseFloat(h);\n      }\n      this.dimensionsArray.push(`Length=${this.model.Length} Width=${this.model.Width} Height=${this.model.Height}`);\n      if (this.model.Qnty == this.dimensionsArray.length) {\n        this.model.Dmnsn = this.model.Length + this.model.Width + this.model.Height;\n        this.disableAddbtn = true;\n        this.disableDimensionField = true;\n      } else {\n        this.disableAddbtn = false;\n      }\n      this.totalDimnsn = `L=${this.model.Length}  W=${this.model.Width} H=${this.model.Height}`;\n      this.lenght = 0;\n      this.width = 0;\n      this.height = 0;\n    } else if (this.dimensionSelectedOption == 'in') {\n      if (this.model.Length == 0 || this.model.Length) {\n        this.model.Length += parseFloat(l);\n      }\n      if (this.model.Width == 0 || this.model.Width) {\n        this.model.Width += parseFloat(w);\n      }\n      if (this.model.Height == 0 || this.model.Height) {\n        this.model.Height += parseFloat(h);\n      }\n      this.dimensionsArray.push(`Length=${this.model.Length} Width=${this.model.Width} Height=${this.model.Height}`);\n      if (this.model.Qnty == this.dimensionsArray.length) {\n        this.model.Dmnsn = this.model.Length + this.model.Width + this.model.Height;\n        this.disableAddbtn = true;\n        this.disableDimensionField = true;\n      } else {\n        this.disableAddbtn = false;\n      }\n      this.totalDimnsn = `L=${this.model.Length}  W=${this.model.Width} H=${this.model.Height}`;\n      this.lenght = 0;\n      this.width = 0;\n      this.height = 0;\n    }\n  }\n  //disable/enable fields and add buttons\n  enableAddDimBtn() {\n    if (this.model) {\n      this.qty = this.model.Qnty;\n      if (this.qty ? true : false) {\n        //for weight fieds and button\n        if (this.qty > this.weightArray.length) {\n          if (this.weightSelectedOption == '') {\n            this.disableWeightField = true;\n          } else {\n            this.disableWeightField = false;\n          }\n          this.disableAddbtn = false;\n          this.disableWghtAddBtn = false;\n        } else {\n          this.disableAddbtn = true;\n          this.disableWghtAddBtn = true;\n          this.disableWeightField = true;\n          this.disableDimensionField = true;\n        }\n        //for dimensions field and button\n        if (this.qty > this.dimensionsArray.length) {\n          if (this.dimensionSelectedOption == '') {\n            this.disableDimensionField = true;\n          } else {\n            this.disableDimensionField = false;\n          }\n          this.disableAddbtn = false;\n          this.disableWghtAddBtn = false;\n        } else {\n          this.disableAddbtn = true;\n          this.disableWghtAddBtn = true;\n          this.disableWeightField = true;\n          this.disableDimensionField = true;\n        }\n      }\n      // else{\n      //   this.disableAddbtn=true;\n      //   this.disableWghtAddBtn=true;\n      //   this.disableWeightField=true;\n      // }\n    }\n  }\n  //for adding weight either in kg or lbs\n  addWeight(wght) {\n    if (wght == null || wght == undefined || wght == '') {\n      Swal.fire({\n        icon: 'info',\n        title: 'Information',\n        text: \"Please Enter Value\"\n      });\n      return;\n    }\n    if (this.weightSelectedOption == \"kg\") {\n      if (this.model.Qnty && this.model.Qnty > 0) {\n        if (this.model.Wght == 0 || this.model.Wght) {\n          this.model.Wght += parseFloat(wght);\n          this.weightArray.push(wght);\n        }\n        this.totalWeight = `${this.model.Wght}kg`;\n        this.weight = 0;\n        if (this.model.Qnty == this.weightArray.length) {\n          this.model.Wght_Unit = \"kg\";\n          this.disableWghtAddBtn = true;\n          this.disableWeightField = true;\n        } else {\n          this.disableWghtAddBtn = false;\n          this.disableWeightField = false;\n        }\n      } else {\n        Swal.fire({\n          icon: 'info',\n          title: 'Information',\n          text: \"Please Enter Number Of Pieces First\"\n        });\n        return;\n      }\n    } else if (this.weightSelectedOption == \"lb\") {\n      if (this.model.Qnty && this.model.Qnty > 0) {\n        if (this.model.Wght == 0 || this.model.Wght) {\n          this.model.Wght += parseFloat(wght);\n          this.weightArray.push(wght);\n        }\n        this.totalWeight = `${this.model.Wght}kg`;\n        this.weight = 0;\n        if (this.model.Qnty == this.weightArray.length) {\n          this.model.Wght_Unit = \"kg\";\n          this.disableWghtAddBtn = true;\n          this.disableWeightField = true;\n        } else {\n          this.disableWghtAddBtn = false;\n          this.disableWeightField = false;\n        }\n      } else {\n        Swal.fire({\n          icon: 'info',\n          title: 'Information',\n          text: \"Please Enter Number Of Pieces First\"\n        });\n        return;\n      }\n    }\n  }\n  onSubmit() {\n    if (this.validateFormFields()) {\n      this.model.Sts = \"Draft\";\n      this.convertArrayToJson();\n      this.showSpinner = true;\n      Swal.showLoading();\n      this.apiService.postFormData(this.model).subscribe(response => {\n        console.log('Response:', response);\n        this.generateQRCodeData(response);\n        //Swal.close();\n        Swal.fire({\n          title: 'Thank You',\n          text: 'Form submitted successfully',\n          icon: 'success',\n          showConfirmButton: false,\n          timer: 3000\n        });\n        this.router.navigate(['/success']);\n      }, error => {\n        // Handle the error here\n        console.error('Error:', error);\n        this.showSpinner = false;\n        Swal.close();\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: error\n        });\n      }, () => {\n        this.showSpinner = false;\n        //Swal.close();\n      });\n    } else {\n      this.displayError();\n    }\n  }\n  convertArrayToJson() {\n    // this.model.Imgs = JSON.stringify(this.imagesArray);\n    this.model.Imgs = JSON.stringify(this.imageBytes);\n  }\n  // Define a function to validate a specific field\n  validateField(fieldName) {\n    switch (fieldName) {\n      case 'clientName':\n        this.validationStatus.clientName = !!this.model.Name;\n        break;\n      case 'shipmentNo':\n        this.validationStatus.shipmentNo = !!this.model.ShptNmbr;\n        break;\n      case 'pieces':\n        this.enableAddDimBtn();\n        this.validationStatus.pieces = !!this.model.Qnty;\n        break;\n      case 'dimensions':\n        this.validationStatus.dimensions = !!this.model.Dmnsn;\n        break;\n      case 'weight':\n        this.validationStatus.weight = !!this.model.Wght;\n        break;\n      case 'bayLocation':\n        this.validationStatus.bayLocation = !!this.model.Locn;\n        break;\n      case 'images':\n        this.validationStatus.images = Array.isArray(this.imagesArray) && this.imagesArray.length > 0;\n        break;\n      case 'email':\n        this.validationStatus.email = !!this.model.Rpnt;\n        break;\n      default:\n      // Handle other fields or unknown fields here\n    }\n  }\n  // Define a function to validate all fields\n  validateFormFields() {\n    this.validateField('clientName');\n    this.validateField('shipmentNo');\n    this.validateField('pieces');\n    this.validateField('dimensions');\n    this.validateField('weight');\n    this.validateField('bayLocation');\n    this.validateField('images');\n    this.validateField('recipients');\n    // Check if any field failed validation\n    return !Object.values(this.validationStatus).some(status => !status);\n  }\n  // onFileChange(event: any) {\n  //   // const file = event.target.files[0];\n  //   // if (file) {\n  //   //   this.form.get('file')?.setValue(file);\n  //   //   this.convertToBase64();\n  //   //   this.imagesArray.push(file.name);\n  //   // }\n  //   this.selectedFile=event.target.files[0];\n  //   this.convertToBase64();\n  // }\n  onFileChange(event) {\n    if (this.model.ShptNmbr == '') {\n      Swal.fire({\n        icon: 'info',\n        title: 'Information',\n        text: \"Please add Shipment number first\"\n      });\n      return;\n    }\n    const file = event.target.files[0];\n    if (file) {\n      this.fileName = file.name;\n      const formData = new FormData();\n      formData.append(\"thumbnail\", file);\n      const upload$ = this.http.post(\"https://localhost:7196/api/Shipment/UploadImage\", formData, {\n        reportProgress: true,\n        observe: 'events'\n        //   headers: {\n        //     'Content-Type': 'multipart/form-data' // Ensure the proper content type is set\n        // }\n      }).pipe(finalize(() => this.reset()));\n      this.uploadSub = upload$.subscribe(event => {\n        this.uploadProgress = 20;\n        if (event.type == HttpEventType.UploadProgress) {\n          if (event.total) {\n            this.uploadProgress = Math.round(100 * (event.loaded / event.total));\n          }\n        }\n      });\n      this.imagesArray.push(file.name);\n      this.uploadProgress = 100;\n    }\n  }\n  cancelUpload() {\n    this.uploadSub.unsubscribe();\n    this.reset();\n  }\n  reset() {\n    this.uploadProgress = 0;\n    this.uploadSub = new Subscription();\n  }\n  // convertToBase64() {\n  //   const reader = new FileReader();\n  //   reader.readAsDataURL(this.selectedFile as Blob);\n  //   reader.onload = () => {\n  //     this.imageBytes = reader.result;\n  //   };\n  //   reader.onerror = (error) => {\n  //     console.log('Error: ', error);\n  //   };\n  // }\n  triggerFileInput() {\n    this.fileInput.nativeElement.click();\n  }\n  generateQRCodeData(response) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      // const warehouseReceiptNo = 'WR1000'; // Replace with your logic to generate the receipt number\n      if (_this.model.Qnty !== null) {\n        for (let i = 1; i <= _this.model.Qnty; i++) {\n          const qrCodeData = `Receipt Number: ${response[i - 1]}\\nClient: ${_this.model.Name}\\nShipment No: ${_this.model.ShptNmbr}`;\n          try {\n            const qrCodeUrl = yield _this.qrCodeService.generateQRCode(qrCodeData);\n            _this.qrCodeData.push(qrCodeUrl);\n          } catch (error) {\n            console.error('Error generating QR code:', error);\n          }\n        }\n        _this.apiService.qrs = _this.qrCodeData;\n        _this.apiService.rcptNmbrs = response;\n        _this.apiService.shipNum = _this.model.ShptNmbr;\n      }\n    })();\n  }\n  ngAfterViewInit() {\n    this._service.info('Welcome', 'Welcome to the Cargo', {\n      position: ['top', 'right'],\n      timeOut: 4000,\n      showProgressBar: true,\n      pauseOnHover: false,\n      clickToClose: false,\n      maxLength: 10\n    });\n  }\n  displayError() {\n    this._service.error('Error', 'All fields are mandatory', {\n      position: ['top', 'right'],\n      timeOut: 4000,\n      showProgressBar: true,\n      pauseOnHover: false,\n      clickToClose: false,\n      maxLength: 10\n    });\n  }\n};\n__decorate([ViewChild('fileInput')], ReceivingComponent.prototype, \"fileInput\", void 0);\nReceivingComponent = __decorate([Component({\n  selector: 'app-receiving',\n  templateUrl: './receiving.component.html',\n  styleUrls: ['./receiving.component.css'],\n  animations: [trigger('fadeIn', [state('void', style({\n    opacity: 0\n  })), transition(':enter', [animate('300ms ease-in', style({\n    opacity: 1\n  }))])])]\n})], ReceivingComponent);\nexport { ReceivingComponent };","map":{"version":3,"names":["Component","ViewChild","trigger","state","style","transition","animate","Shipment","Swal","Subscription","finalize","HttpEventType","ReceivingComponent","constructor","http","apiService","fb","qrCodeService","router","_service","requiredFileType","fileName","uploadProgress","model","uploadedImages","qrCodeData","emptyFields","showSpinner","validationStatus","clientName","shipmentNo","pieces","dimensions","weight","bayLocation","note","images","email","imagesArray","dimensionsArray","weightArray","dimensionSelectedOption","weightSelectedOption","disableDimensionField","disableWeightField","disableAddbtn","disableWghtAddBtn","totalWeight","totalDimnsn","form","group","file","imageBytes","uploadSub","dimensionOptionSelected","option","weightOptionSelected","addDimension","l","w","h","fire","icon","title","text","Length","parseFloat","Width","Height","push","Qnty","length","Dmnsn","lenght","width","height","enableAddDimBtn","qty","addWeight","wght","undefined","Wght","Wght_Unit","onSubmit","validateFormFields","Sts","convertArrayToJson","showLoading","postFormData","subscribe","response","console","log","generateQRCodeData","showConfirmButton","timer","navigate","error","close","displayError","Imgs","JSON","stringify","validateField","fieldName","Name","ShptNmbr","Locn","Array","isArray","Rpnt","Object","values","some","status","onFileChange","event","target","files","name","formData","FormData","append","upload$","post","reportProgress","observe","pipe","reset","type","UploadProgress","total","Math","round","loaded","cancelUpload","unsubscribe","triggerFileInput","fileInput","nativeElement","click","_this","_asyncToGenerator","i","qrCodeUrl","generateQRCode","qrs","rcptNmbrs","shipNum","ngAfterViewInit","info","position","timeOut","showProgressBar","pauseOnHover","clickToClose","maxLength","__decorate","selector","templateUrl","styleUrls","animations","opacity"],"sources":["D:\\PWS\\WareHouseManagement\\src\\app\\orders\\orders.component.ts"],"sourcesContent":["import { Component, ElementRef, ViewChild } from '@angular/core';\r\nimport { trigger, state, style, transition, animate } from '@angular/animations';\r\nimport { ApiService } from '../api.service';\r\nimport { Shipment } from '../Models/shipment';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { QrcodeService } from '../qrcode.service';\r\nimport { Route, Router } from '@angular/router';\r\nimport { MessageService } from '../messsage.service';\r\nimport { NotificationsService } from 'angular2-notifications';\r\nimport Swal from 'sweetalert2';\r\nimport { Subscription, finalize } from 'rxjs';\r\nimport { HttpClient, HttpEventType } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-receiving',\r\n  templateUrl: './receiving.component.html',\r\n  styleUrls: ['./receiving.component.css'],\r\n  animations: [\r\n    trigger('fadeIn', [\r\n      state('void', style({ opacity: 0 })),\r\n      transition(':enter', [animate('300ms ease-in', style({ opacity: 1 }))]),\r\n    ])\r\n  ]\r\n})\r\nexport class ReceivingComponent {\r\n  requiredFileType:string='';\r\n\r\n  fileName = '';\r\n  uploadProgress:number=0;\r\n  uploadSub: Subscription;\r\n\r\n  @ViewChild('fileInput') fileInput!: ElementRef;\r\n  model: Shipment = new Shipment();\r\n  form: FormGroup;\r\n  selectedFile: File | undefined;\r\n   imageBytes: ArrayBuffer | string | null;\r\n  uploadedImages: File[] = [];\r\n  qrCodeData: string[] = [];\r\n  errorMessage!: string;\r\n  emptyFields: string[] = [];\r\n  showSpinner: boolean = false;\r\n\r\n  validationStatus = {\r\n    clientName: true,\r\n    shipmentNo: true,\r\n    pieces: true,\r\n    dimensions: true,\r\n    weight: true,\r\n    bayLocation: true,\r\n    note: true,\r\n    images: true,\r\n    email: true,\r\n  };\r\n  imagesArray: string[] = [];\r\n  dimensionsArray: string[] = [];\r\n  weightArray: string[] = [];\r\n  dimensionSelectedOption:string='' ;\r\n  weightSelectedOption: string = '' ;\r\n  disableDimensionField:boolean = true;\r\n  disableWeightField:boolean = true;\r\n  lenght!:number;;\r\n  width!:number;\r\n  height!:number;\r\n  weight!:number;\r\n  disableAddbtn:boolean = true;\r\n  disableWghtAddBtn:boolean = true;\r\n  qty!:number |null;\r\n  totalWeight:string='';\r\n  totalDimnsn:string=''\r\n\r\n  constructor(private http: HttpClient,private apiService: ApiService, private fb: FormBuilder, private qrCodeService: QrcodeService, private router: Router,private _service:NotificationsService) {\r\n    this.model = new Shipment();\r\n    this.form = this.fb.group({\r\n      file: [''],\r\n    });\r\n    this.imageBytes = null;\r\n    this.imagesArray = [];\r\n    this.dimensionsArray=[];\r\n    this.uploadSub = new Subscription();\r\n\r\n\r\n  }\r\n\r\n  dimensionOptionSelected(option: string) {\r\n    this.dimensionSelectedOption = option;\r\n    this.disableDimensionField = false;\r\n  }\r\n  weightOptionSelected(option: string) {\r\n    this.weightSelectedOption = option;\r\n    this.disableWeightField=false;\r\n  }\r\n\r\n  //for adding dimensions\r\n  addDimension(l:any,w:any,h:any) {\r\n    if(l==null || w==null || h==null) {\r\n      Swal.fire({\r\n        icon: 'info',\r\n        title: 'Information',\r\n        text: \"Please Enter Value\", \r\n      });\r\n      return;\r\n    }\r\n    if(this.dimensionSelectedOption=='cm')\r\n    {\r\n      if(this.model.Length==0 || this.model.Length)\r\n      {\r\n        this.model.Length  +=parseFloat(l);\r\n        \r\n      }\r\n      if(this.model.Width==0 || this.model.Width){\r\n        this.model.Width +=parseFloat(w);\r\n      }\r\n      if(this.model.Height==0 || this.model.Height){\r\n        this.model.Height +=parseFloat(h);\r\n      }\r\n    \r\n    \r\n      this.dimensionsArray.push(`Length=${this.model.Length} Width=${this.model.Width} Height=${this.model.Height}`);\r\n      if(this.model.Qnty==this.dimensionsArray.length)\r\n     {\r\n      this.model.Dmnsn=this.model.Length+this.model.Width+this.model.Height;\r\n      this.disableAddbtn=true;\r\n      this.disableDimensionField=true;\r\n     }\r\n     else\r\n     {\r\n      this.disableAddbtn=false;\r\n     }\r\n      this.totalDimnsn= `L=${this.model.Length}  W=${this.model.Width} H=${this.model.Height}`;\r\n      this.lenght=0;\r\n      this.width=0;\r\n      this.height=0;\r\n   \r\n    }\r\n    else if (this.dimensionSelectedOption=='in')\r\n    {\r\n      if(this.model.Length==0 || this.model.Length)\r\n      {\r\n        this.model.Length  +=parseFloat(l);\r\n        \r\n      }\r\n      if(this.model.Width==0 || this.model.Width){\r\n        this.model.Width +=parseFloat(w);\r\n      }\r\n      if(this.model.Height==0 || this.model.Height){\r\n        this.model.Height +=parseFloat(h);\r\n      }\r\n    \r\n    \r\n      this.dimensionsArray.push(`Length=${this.model.Length} Width=${this.model.Width} Height=${this.model.Height}`);\r\n      if(this.model.Qnty==this.dimensionsArray.length)\r\n     {\r\n      this.model.Dmnsn=this.model.Length+this.model.Width+this.model.Height;\r\n      this.disableAddbtn=true;\r\n      this.disableDimensionField=true;\r\n     }\r\n     else\r\n     {\r\n      this.disableAddbtn=false;\r\n     }\r\n      this.totalDimnsn= `L=${this.model.Length}  W=${this.model.Width} H=${this.model.Height}`;\r\n      this.lenght=0;\r\n      this.width=0;\r\n      this.height=0;\r\n   \r\n    }\r\n}\r\n\r\n//disable/enable fields and add buttons\r\nenableAddDimBtn()\r\n{\r\n  if (this.model) \r\n  { \r\n      this.qty=this.model.Qnty\r\n    if(this.qty ? true : false){\r\n      //for weight fieds and button\r\n      if(this.qty! > this.weightArray.length)\r\n      {\r\n        if(this.weightSelectedOption =='')\r\n        {\r\n          this.disableWeightField=true;\r\n        }\r\n        else\r\n        {\r\n          this.disableWeightField=false;\r\n        }\r\n        this.disableAddbtn=false;\r\n        this.disableWghtAddBtn=false;\r\n      }\r\n      else\r\n      {\r\n        this.disableAddbtn=true;\r\n        this.disableWghtAddBtn=true;\r\n        this.disableWeightField=true;\r\n        this.disableDimensionField=true;\r\n      }\r\n      //for dimensions field and button\r\n      if(this.qty! > this.dimensionsArray.length)\r\n      {\r\n        if(this.dimensionSelectedOption=='')\r\n        {\r\n          this.disableDimensionField=true;\r\n        }\r\n        else{\r\n          this.disableDimensionField=false;\r\n        }\r\n        this.disableAddbtn=false;\r\n        this.disableWghtAddBtn=false;\r\n      }\r\n      else\r\n      {\r\n        this.disableAddbtn=true;\r\n        this.disableWghtAddBtn=true;\r\n        this.disableWeightField=true;\r\n        this.disableDimensionField=true;\r\n      }\r\n    \r\n      \r\n    }\r\n    // else{\r\n    //   this.disableAddbtn=true;\r\n    //   this.disableWghtAddBtn=true;\r\n    //   this.disableWeightField=true;\r\n    // }\r\n  }\r\n\r\n}\r\n\r\n//for adding weight either in kg or lbs\r\n  addWeight(wght:any)\r\n  {\r\n    if(wght==null || wght==undefined || wght=='') {\r\n      Swal.fire({\r\n        icon: 'info',\r\n        title: 'Information',\r\n        text: \"Please Enter Value\", \r\n      });\r\n      return;\r\n    }\r\n    if(this.weightSelectedOption==\"kg\")\r\n    {\r\n      if(this.model.Qnty && this.model.Qnty >0)\r\n      {\r\n        if(this.model.Wght==0 || this.model.Wght)\r\n        {\r\n          this.model.Wght += parseFloat(wght);\r\n          this.weightArray.push(wght);\r\n        }\r\n        this.totalWeight=`${this.model.Wght}kg`;\r\n        this.weight=0;\r\n        if(this.model.Qnty==this.weightArray.length){\r\n          this.model.Wght_Unit=\"kg\";\r\n         this.disableWghtAddBtn=true;\r\n         this.disableWeightField=true;\r\n        }\r\n        else\r\n        {\r\n          this.disableWghtAddBtn=false;\r\n          this.disableWeightField=false;\r\n        }\r\n      }\r\n      else\r\n      {\r\n        Swal.fire({\r\n          icon: 'info',\r\n          title: 'Information',\r\n          text: \"Please Enter Number Of Pieces First\", \r\n        });\r\n        return;\r\n      }\r\n    }\r\n    else if(this.weightSelectedOption==\"lb\")\r\n    {\r\n      if(this.model.Qnty && this.model.Qnty >0)\r\n      {\r\n        if(this.model.Wght==0 || this.model.Wght)\r\n        {\r\n          this.model.Wght += parseFloat(wght);\r\n          this.weightArray.push(wght);\r\n        }\r\n        this.totalWeight=`${this.model.Wght}kg`;\r\n        this.weight=0;\r\n        if(this.model.Qnty==this.weightArray.length){\r\n         this.model.Wght_Unit=\"kg\";\r\n         this.disableWghtAddBtn=true;\r\n         this.disableWeightField=true;\r\n        }\r\n        else\r\n        {\r\n          this.disableWghtAddBtn=false;\r\n          this.disableWeightField=false;\r\n        }\r\n      }\r\n      else\r\n      {\r\n        Swal.fire({\r\n          icon: 'info',\r\n          title: 'Information',\r\n          text: \"Please Enter Number Of Pieces First\", \r\n        });\r\n        return;\r\n      }\r\n    }\r\n    \r\n   \r\n  }\r\n  onSubmit() {\r\n    if (this.validateFormFields()) {\r\n      this.model.Sts=\"Draft\";\r\n      this.convertArrayToJson();\r\n      this.showSpinner = true;\r\n      Swal.showLoading();\r\n      this.apiService.postFormData(this.model).subscribe(\r\n        (response: string[]) => {\r\n          console.log('Response:', response);\r\n          this.generateQRCodeData(response);\r\n          //Swal.close();\r\n          Swal.fire({\r\n            title: 'Thank You',\r\n            text: 'Form submitted successfully',\r\n            icon: 'success',\r\n            showConfirmButton: false,\r\n            timer: 3000 \r\n          });\r\n          this.router.navigate(['/success']);\r\n        },\r\n        (error) => {\r\n          // Handle the error here\r\n          console.error('Error:', error);\r\n          this.showSpinner = false; \r\n          Swal.close();\r\n          Swal.fire({\r\n            icon: 'error',\r\n            title: 'Oops...',\r\n            text: error, \r\n          });\r\n        },\r\n        () => {\r\n          this.showSpinner = false; \r\n          //Swal.close();\r\n      }\r\n      \r\n      );\r\n    }\r\n    else{\r\n      this.displayError();\r\n    }\r\n  }\r\n  convertArrayToJson() {\r\n   // this.model.Imgs = JSON.stringify(this.imagesArray);\r\n    this.model.Imgs=JSON.stringify(this.imageBytes);\r\n  }\r\n  // Define a function to validate a specific field\r\n  validateField(fieldName: string) {\r\n    switch (fieldName) {\r\n      case 'clientName':\r\n        this.validationStatus.clientName = !!this.model.Name;\r\n        break;\r\n      case 'shipmentNo':\r\n        this.validationStatus.shipmentNo = !!this.model.ShptNmbr;\r\n        break;\r\n      case 'pieces':\r\n         this.enableAddDimBtn();\r\n        this.validationStatus.pieces = !!this.model.Qnty;\r\n        break;\r\n      case 'dimensions':\r\n        this.validationStatus.dimensions = !!this.model.Dmnsn;\r\n        break;\r\n      case 'weight':\r\n        this.validationStatus.weight = !!this.model.Wght;\r\n        break;\r\n      case 'bayLocation':\r\n        this.validationStatus.bayLocation = !!this.model.Locn;\r\n        break;\r\n      case 'images':\r\n        this.validationStatus.images = Array.isArray(this.imagesArray) && this.imagesArray.length > 0;\r\n        break;\r\n      case 'email':\r\n        this.validationStatus.email = !!this.model.Rpnt;\r\n        break;\r\n      default:\r\n      // Handle other fields or unknown fields here\r\n    }\r\n  }\r\n  // Define a function to validate all fields\r\n  validateFormFields() {\r\n    this.validateField('clientName');\r\n    this.validateField('shipmentNo');\r\n    this.validateField('pieces');\r\n    this.validateField('dimensions');\r\n    this.validateField('weight');\r\n    this.validateField('bayLocation');\r\n    this.validateField('images');\r\n    this.validateField('recipients');\r\n    // Check if any field failed validation\r\n    return !Object.values(this.validationStatus).some((status) => !status);\r\n  }\r\n  // onFileChange(event: any) {\r\n  //   // const file = event.target.files[0];\r\n  //   // if (file) {\r\n  //   //   this.form.get('file')?.setValue(file);\r\n  //   //   this.convertToBase64();\r\n  //   //   this.imagesArray.push(file.name);\r\n  //   // }\r\n  //   this.selectedFile=event.target.files[0];\r\n  //   this.convertToBase64();\r\n  // }\r\n\r\n\r\n  onFileChange(event:any) {\r\n    if(this.model.ShptNmbr==''){\r\n      Swal.fire({\r\n        icon: 'info',\r\n        title: 'Information',\r\n        text: \"Please add Shipment number first\", \r\n      });\r\n      return;\r\n    }\r\n    const file:File = event.target.files[0];\r\n  \r\n    if (file) {\r\n        this.fileName = file.name;\r\n        const formData = new FormData();\r\n        formData.append(\"thumbnail\", file);\r\n\r\n        const upload$ = this.http.post(\"https://localhost:7196/api/Shipment/UploadImage\", formData, {\r\n            reportProgress: true,\r\n            observe: 'events'\r\n          //   headers: {\r\n          //     'Content-Type': 'multipart/form-data' // Ensure the proper content type is set\r\n          // }\r\n        })\r\n        .pipe(\r\n            finalize(() => this.reset())\r\n        );\r\n      \r\n        this.uploadSub = upload$.subscribe(event => {\r\n          this.uploadProgress=20;\r\n          if (event.type == HttpEventType.UploadProgress) {\r\n            if (event.total) {\r\n              this.uploadProgress = Math.round(100 * (event.loaded / event.total));\r\n          }\r\n           \r\n          }\r\n        });\r\n        this.imagesArray.push(file.name);\r\n        this.uploadProgress=100;\r\n    }\r\n}\r\n\r\ncancelUpload() {\r\nthis.uploadSub.unsubscribe();\r\nthis.reset();\r\n}\r\n\r\nreset() {\r\nthis.uploadProgress = 0;\r\nthis.uploadSub = new Subscription();\r\n\r\n}\r\n\r\n\r\n  // convertToBase64() {\r\n  //   const reader = new FileReader();\r\n  //   reader.readAsDataURL(this.selectedFile as Blob);\r\n  //   reader.onload = () => {\r\n  //     this.imageBytes = reader.result;\r\n  //   };\r\n  //   reader.onerror = (error) => {\r\n  //     console.log('Error: ', error);\r\n  //   };\r\n  // }\r\n\r\n  triggerFileInput() {\r\n    this.fileInput.nativeElement.click();\r\n  }\r\n\r\n  async generateQRCodeData(response:string[]): Promise<void> {\r\n    // const warehouseReceiptNo = 'WR1000'; // Replace with your logic to generate the receipt number\r\n     if (this.model.Qnty !== null) {\r\n       for (let i = 1; i <= this.model.Qnty; i++) {\r\n         const qrCodeData = `Receipt Number: ${response[i-1]}\\nClient: ${this.model.Name}\\nShipment No: ${this.model.ShptNmbr}`;\r\n         try {\r\n           const qrCodeUrl = await this.qrCodeService.generateQRCode(qrCodeData);\r\n           this.qrCodeData.push(qrCodeUrl);\r\n         } catch (error) {\r\n           console.error('Error generating QR code:', error);\r\n         }\r\n       }\r\n       this.apiService.qrs = this.qrCodeData;\r\n       this.apiService.rcptNmbrs=response;\r\n       this.apiService.shipNum=this.model.ShptNmbr;\r\n     }\r\n   }\r\n\r\n   ngAfterViewInit(){\r\n    this._service.info(\r\n      'Welcome',\r\n      'Welcome to the Cargo',\r\n      {\r\n        position: ['top', 'right'],\r\n          timeOut: 4000,\r\n          showProgressBar: true,\r\n          pauseOnHover: false,\r\n          clickToClose: false,\r\n          maxLength: 10\r\n      }\r\n  )\r\n}\r\n\r\ndisplayError(){\r\n  this._service.error(\r\n    'Error',\r\n    'All fields are mandatory',\r\n    {\r\n      position: ['top', 'right'],\r\n        timeOut: 4000,\r\n        showProgressBar: true,\r\n        pauseOnHover: false,\r\n        clickToClose: false,\r\n        maxLength: 10\r\n    }\r\n)\r\n}\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}